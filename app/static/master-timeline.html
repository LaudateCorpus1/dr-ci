<html>
<head>
<title>Master timeline</title>
<link href="/style.css" rel="stylesheet" type="text/css"></link>

<link href="/dropdown.css" rel="stylesheet" type="text/css"></link>

<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.24.0/moment.min.js"></script>

<link href="https://unpkg.com/tabulator-tables@4.2.5/dist/css/tabulator.min.css" rel="stylesheet"/>

<script type="text/javascript" src="https://unpkg.com/tabulator-tables@4.2.5/dist/js/tabulator.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/lodash@4.17.11/lodash.min.js"></script>

<script src="/script/tinycolor.js"></script>

<script src="/script/js-utils.js"></script>
<script src="/script/html-utils.js"></script>
<script src="/script/table-helpers.js"></script>
<script src="/script/master-timeline.js"></script>

</head>

<body onload="main();">


<span style="float: right;">[<a href="/">home</a>]</span>
<h2>Master timeline</h2>


<span style="float: right"><a href="/code-breakages.html">List known breakages</a></span>

<form onsubmit="return false;">

<label>
count:
<input id="count-input" type="number" value="25" min="1" max="100" size="3"/>
</label>

<p>Start position: <button onclick="url_from_form();">Go</button></p>
<div id="scan-throbber" style="display: none; float:right; clear: all;"><img src="/images/duck.gif"/></div>

<label><input type="radio" name="pagination-mode" value="start-by-offset" checked="true"/> by offset:</label>
<label>
<input id="offset-input" type="number" value="0" min="0" size="3"/>
commits
</label>
<button onclick="next_page()">Next page</button> <button onclick="top_page()">Top</button>

<br/>

<label><input type="radio" name="pagination-mode" value="start-by-sha1"/> by SHA1:</label>
<input id="sha1-input" type="text" size="40"/>

<br/>

<label><input type="radio" name="pagination-mode" value="start-by-commit-index"/> by index:</label>
<label>from <input id="commit-index-max" type="number" min="0" size="5"/></label> <label>down to <input id="commit-index-min" type="number" min="0" size="5"/></label>
</form>

<div id="master-timeline-table"></div>


<div id="myDropdown" class="dropdown-content"></div>

<dialog id="affected-jobs-dialog">
<table><tr><td>

	<p>Select breakages caused by this commit:</p>
	<button id="dialog-select-all-button">Toggle select all</button>
	<button id="dialog-select-none-button">Select none</button>
	<div id="broken-jobs-table"></div>

</td><td style="padding-left: 1em;">

<table><tr><th>Notes:</th>
<td>
<textarea id="dialog-description-textarea" placeholder="No comment"></textarea>
</td>
</tr>

<tr>
<th>
<label for="breakage-mode-selector">Cause:</label>
</th>
<td><select id="breakage-mode-selector"/> <img id="mini-throbber-failure-modes" src="/images/animated-spinner.svg" style="width: 16px; vertical-align: middle"/></td>
</tr>


<tr>
<th><label for="breakage-span-start-commit">Start commit:</label></th><td><input type="text" id="breakage-span-start-commit" size="40"/></td>
</tr>

<tr>
<td colspan="2">
<label><input id="is-ongoing-checkbox" type="checkbox" name="is-ongoing"/> Ongoing?</label>
</td></tr>

<tr id="span-end-form-section">
<th><label for="breakage-span-last-commit">Last affected commit:</label></th>
<td><input id="breakage-span-last-commit" type="text" size="40"/></td>
</tr>
</table>


<button id="dialog-submit-button">Submit</button>
<button id="dialog-cancel-button">Cancel</button>

</td></tr></table>
</dialog>

<hr/>

<i>by <a href="https://github.com/kostmo" rel="author">kostmo</a></i>
<span style="float: right">See <a href="https://github.com/kostmo/circleci-failure-tracker/blob/master/README.md">project README</a> for details.</span>

</body>
</head>
