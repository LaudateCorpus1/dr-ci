<html>
<head>
<title>Add pattern</title>

<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

<link href="/style.css" rel="stylesheet" type="text/css"></link>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script src="/script/html-utils.js"></script>
<script src="/script/tag-helpers.js"></script>
<script src="/script/add-pattern.js"></script>
</head>

<body onload="main();">
<span style="float: right;">[<a href="/">home</a>]</span>

<h2>Add pattern</h2>
<form onsubmit="return false;">

<h3>Immutable properties</h3>
<p>This data cannot be changed after submitting; instead, a new pattern must be created while "retiring" the old one.</p>

<label>Pattern: <input id="input-pattern-text" type="text" value="does not actually allow to resize" size="60"/></label>
<br/>
<label><input id="is-regex-checkbox" type="checkbox"/> is a regular expression</label>

<br/>
<label>
Applicable build steps:

<select id="build-step-applicability-input"></select>
</label>
<button onclick="add_build_step();">Add</button>

<div id="all-steps-applicable-indicator"><strong>&lt;currently applicable to all steps&gt;</strong></div>
<div id="step-list-container" style="padding: .3em;"></div>

<br/>
<label>Position from end: <input id="input-lines-from-end" type="text" value="" size="5"/> lines</label> <label><input id="is-using-lines-from-end-checkbox" type="checkbox"/> require position match</label>


<h3>Mutable properties</h3>
<p>These can be edited later.</p>

<label>
Description:
<input id="input-pattern-description" type="textarea" value="" size="60"/>
</label>

<br/>
<label>
Specificity:
<input id="specificity-input" type="number" value="1" min="1" max="100">
</label>
<br/>
<label><input id="is-nondeterministic-checkbox" type="checkbox"/> regex produces nondeterministic values</label>
<br/>
<label>
Tags:
<input id="pattern-tag-input" type="text" value=""/></label> <button onclick="add_tag();">Add</button>

<div id="tag-list-container" style="padding: .3em;"></div>


<h3>Testing</h3>
<button onclick="test_pattern();">Test on build ID</button> <label>#<input id="test-build-id" type="text" value="1040566"/></label> <button onclick="view_full_log();">View full log</button> <img id="mini-throbber" src="/images/animated-spinner.svg" style="width: 16px; vertical-align: middle; display: none;"/>

<div id="test-match-results-container"></div>

<h3>Submission</h3>
<button onclick="submit_pattern(this);">Submit</button> <img id="mini-throbber-submit" src="/images/animated-spinner.svg" style="width: 16px; vertical-align: middle; display: none;"/>
</form>


<hr/>
<h2>Database backup</h2>

<a href="/api/patterns-dump">Download patterns</a>

<hr/>
<h2>Database restoration</h2>

<form method="POST" onsubmit="return import_patterns();">

<input type="file" id="selectFiles"/>
<br />
<textarea id="upload-result-box"></textarea>

<input type="submit" value="Upload"/>
</form>


<hr/>

<i>by <a href="https://github.com/kostmo" rel="author">kostmo</a></i>
<span style="float: right">See <a href="https://github.com/kostmo/circleci-failure-tracker/blob/master/README.md">project README</a> for details.</span>

</body>
</head>

