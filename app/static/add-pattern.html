<html>
<head>
<title>Add pattern</title>

<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

<link href="/style.css" rel="stylesheet" type="text/css"></link>


<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script src="/script/html-utils.js"></script>
<script src="/script/tag-helpers.js"></script>
<script src="/script/add-pattern.js"></script>
</head>

<body onload="main();">

<h2>Add pattern</h2>
<form onsubmit="return false;">

<h3>Mutable properties</h3>
<p>These can be edited later.</p>

<br/>
<label>
Description:
<input id="input-pattern-description" type="textarea" value="blah" size="60"/>
</label>

<br/>
<label>
Tags:
<input id="pattern-tag-input" type="text" value=""/></label> <button onclick="add_tag();">Add</button>

<div id="tag-list-container" style="padding: .3em;"></div>

<h3>Immutable properties</h3>
<p>This data cannot be changed after submitting; instead, a new pattern must be created while "retiring" the old one.</p>

<label>Pattern: <input id="input-pattern-text" type="text" value="does not actually allow to resize" size="60"/></label>
<br/>
<label><input id="is-regex-checkbox" type="checkbox" checked="checked"/> is a regular expression</label>
<br/>
<label><input id="is-nondeterministic-checkbox" type="checkbox"/> regex produces nondeterministic values</label>

<br/>
<label>
Applicable build steps (none means applicable to all steps):
<input id="build-step-applicability-input" type="text" value=""/></label> <button onclick="add_build_step();">Add</button>
<div id="step-list-container" style="padding: .3em;"></div>


<br/>
<label>Position from end: <input id="input-lines-from-end" type="text" value="" size="5"/> lines</label> <label><input id="is-using-lines-from-end-checkbox" type="checkbox"/> use position</label>

<br/>
<button onclick="test_pattern();">Test on build ID</button> <label>#<input id="test-build-id" type="text" value="1040566"/></label> <button onclick="get_random_build('test-build-id');">Random</button>

<div id="test-match-results-container"></div>

<button onclick="submit_pattern();">Submit</button>
</form>


<hr/>
<h2>Database backup</h2>

<a href="/api/patterns-dump">Download patterns</a>

<hr/>
<h2>Database restoration</h2>

<form method="POST" onsubmit="return import_patterns();">

<input type="file" id="selectFiles"/>
<br />
<textarea id="upload-result-box"></textarea>

<input type="submit" value="Upload"/>
</form>


</body>
</head>

